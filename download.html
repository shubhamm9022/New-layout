<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Download Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDv1KgOL_CsLs4xV6KuYuk3TD6xqpnY-84",
      authDomain: "movievault-e650e.firebaseapp.com",
      databaseURL: "https://movievault-e650e-default-rtdb.firebaseio.com",
      projectId: "movievault-e650e",
      storageBucket: "movievault-e650e.appspot.com",
      messagingSenderId: "61140580505",
      appId: "1:61140580505:web:d3216ca8bd944662a22008"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    document.addEventListener("DOMContentLoaded", async () => {
      const showKey = decodeURIComponent(window.location.hash.slice(1));
      const title = document.getElementById("show-title");
      const container = document.getElementById("episodes");

      title.innerText = showKey ? `Showing: ${showKey}` : "Show Not Found";

      if (!showKey) return;

      try {
        const snapshot = await get(child(ref(db), `shows/${showKey}`));
        if (!snapshot.exists()) {
          container.innerHTML = "<p style='color: #ccc'>Show not found.</p>";
          return;
        }

        const data = snapshot.val();
        for (const season in data) {
          for (const episode in data[season]) {
            const links = data[season][episode];
            let buttons = "";

            if (links.filepress) {
              buttons += `<a href="${links.filepress}" class="btn filepress">Filepress [G-Drive]</a>`;
            }

            if (links.neodrive) {
              buttons += `<a href="${links.neodrive}" class="btn gdirect">⚡ G-Direct [Instant]</a>`;
            }

            if (buttons) {
              container.innerHTML += `
                <h2>-: Episode ${episode} :-</h2>
                <div class="button-group">${buttons}</div>
              `;
            }
          }
        }
      } catch (err) {
        container.innerHTML = "<p style='color: #ccc'>Error loading data.</p>";
        console.error(err);
      }
    });
  </script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0a0a0a;
      color: #f5f5f5;
      text-align: center;
    }

    .note {
      margin: 20px;
      font-size: 17px;
      font-weight: 500;
      color: #c8a657;
    }

    h2 {
      margin-top: 30px;
      margin-bottom: 10px;
      font-size: 22px;
      color: #ffffff;
      font-weight: 600;
    }

    .button-group {
      margin: 15px 0 30px;
    }

    .btn {
      display: inline-block;
      margin: 10px;
      padding: 13px 28px;
      border: 1px solid transparent;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .btn:hover {
      opacity: 0.92;
      transform: translateY(-2px);
    }

    .btn:active {
      transform: scale(0.97);
    }

    .gdirect {
      background: #121212;
      border: 1px solid #00bfa5;
      color: #00e5c3;
    }

    .filepress {
      background: #151515;
      border: 1px solid #ffa000;
      color: #ffca28;
    }

    .footer {
      background-color: #111;
      padding: 20px;
      font-size: 15px;
      margin-top: 40px;
      color: #c8e6c9;
    }

    .footer strong {
      color: #ff6e40;
    }
  </style>
</head>
<body>

  <div class="note">Note: Use Download Manager like IDM or ADM for ⚡ Instant Download!</div>

  <h2 id="show-title">Loading...</h2>
  <div id="episodes"></div>

  <div class="footer">
    Use ✅ <strong>Fast Server {V-Cloud}</strong> to download without G-Drive login. (Supports resume)
  </div>

</body>
</html>
